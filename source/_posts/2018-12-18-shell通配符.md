---
title: shell通配符
tags:
  - linux
  - 通配符
  - 正则表达式
  - shell
categories:
  - linux
date: 2018-12-18 14:20:14
---
<Excerpt in index | 首页摘要> 

介绍linux中shell通配符的用法，以及其与正则表达式的关系

<!-- more -->
<The rest of contents | 余下全文>

### 通配符（Wildcard）

在 Shell 中命令中，通常会使用通配符表达式来匹配一些文件，如以下命令可以查找当前目录下所有后缀为 .xml 的文件

```
find . -name "*.xml" 
```

Shell 中可以使用的通配符如下：

| 通配符      | 含义                                 | 实例                                                         |
| ----------- | ------------------------------------ | ------------------------------------------------------------ |
| *           | 匹配 0 或多个字符                    | `a*b`，a与b之间可以有任意长度的任意字符, 也可以一个也没有, 如 aabcb, axyzb, a012b, ab |
| ?           | 匹配任意单个字符                     | `a?b`，a与b之间有且只有一个字符, 可以是任意字符, 如 aab, abb, acb, a0b |
| [list]      | 匹配 list 中的任意单个字符           | `a[xyz]b`，a与b之间必须也只能有一个字符, 但只能是 x 或 y 或 z, 如 axb, ayb, azb。 |
| [!list]     | 匹配除 list 中的任意单一字符         | `a[!0-9]b`，a与b之间必须也只能有一个字符, 但不能是阿拉伯数字, 如 axb, aab, a-b。 |
| [c1-c2]     | 匹配 c1-c2 中的任意单一字符          | `a[0-9]b`，匹配0与9之间其中一个字符，如 a0b, a1b... a9b      |
| {s1,s2,...} | 匹配 s1 或 s2 (或更多)中的一个字符串 | `a{abc,xyz,123}b`，a与b之间只能是abc或xyz或123这三个字符串之一 |



### 转义字符

有的时候，我们匹配的内容里面会存在 `*`，`?`，`[`等通配符中的符号。为了表示他们原来的意思，我们需要使用转义字符 `\`，如 `a\[ac\]c` 表示匹配 `a[a]c` 或 `a[c]c`。`\` 本身用 `\\` 表示。



### 分清楚通配符表达式和正则表达式

通配符看起来和正则表达式很像，但他们并不是同一种东西。**正则表达式中的那些量词的匹配规则和这里提到的几个通配符的匹配规则并不相同。**如正则表达式中 `*` 表示重复前一个字符任意次，`ab*` 表示的是那些 `a` 后面跟 0 个或多个 `b` 的字符串， 而通配符表达式中 `*` 表示 0 或多个任意字符， `ab*` 表示的是那些 `ab` 后面跟任意个字符的字符串。

而且**正则表达式一般是部分匹配的**，用来匹配内容中的一部分，如用正则表达式 `a` 去匹配 `bac` 这段字符串时，匹配是成功的，匹配到的内容是 `a`。但是**通配符表达式的话是全部匹配的**，表达式要匹配整个字符串才算匹配成功，如用通配符表达式 `a` 取匹配 `bac` 这段字符串时，匹配是失败的。

在 Shell 命令中，通常**用通配符表达式来匹配文件名**，而**用正则表达式来匹配一段文本内容**。以 `grep` 命令为例，`grep` 命令可以在指定的文件中，挑选出和表达式匹配的那些行，其中指定文件是用的通配符表达式，而文本内容的匹配用的是正则表达式。

今天使用 `grep` 时，就因为没分清楚他们，忙活了半天。情况是这样的，我想看一个 jar 包里是不是有 pom 相关的文件，所以就输入了下面命令

```bash
jar tf maven-model-builder-3.5.3.jar | grep 'pom*'  # 这里是正则表达式，匹配有po、pom、pom+子串的字符串
```

结果输入了一堆文件，而且很多文件都没有 pom 这串字符串的。输出内容是这样的：

```
...
org/apache/maven/model/composition/
org/apache/maven/model/interpolation/
org/apache/maven/model/superpom/
org/apache/maven/model/composition/DependencyManagementImporter.class
...
```

这就是因为我把通配符表达式和正则表达式搞混了，后来知道原因后，用下面的命令才得到想要的内容。

```bash
jar tf maven-model-builder-3.5.3.jar | grep 'pom.*'
```

使用 Shell 命令时，要分清楚哪里用的是通配符表达式，哪里用的是正则表达式。



作者：Happioo

链接：https://www.jianshu.com/p/25f3d0cd5fdc

來源：简书

简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。