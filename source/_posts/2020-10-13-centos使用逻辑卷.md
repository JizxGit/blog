---
title: centos使用逻辑卷
tags:
  - linux
  - centos
categories:
  - linux
date: 2020-10-13 16:30:25
---
<Excerpt in index | 首页摘要> 

Centos 中使用卷组、逻辑卷等硬盘管理

<!-- more -->
<The rest of contents | 余下全文>



### 概念

| 名词 | 解释                                                      | 设备名                  |
| :--- | :-------------------------------------------------------- | :---------------------- |
| PV   | 物理卷，在LVM系统中处于最底层，可以是整个硬盘、硬盘的分区 | /dev/sda                |
| PE   | 物理区域，物理卷的基本单元，大小是可以配置的，默认为4MB   |                         |
| VG   | 卷组，由一个或多个物理卷组成                              | /dev/<VGname>           |
| LV   | 逻辑卷，建立在卷组之上，它是从卷组中“切出”的一块空间      | /dev/<VGname>/<LV name> |

![img](/Users/jizhongxian/个人/blog/source/_posts/2020-10-13-centos使用逻辑卷/逻辑、物理卷示意图.png)

### 物理盘

`fdisk -l` 来查看当前服务器都多少块磁盘。



### 物理卷

将磁盘或分区设定为物理卷

1. 使用`pvscan`指令查询服务器有无物理卷，如果显示“No matching physical volumes found”表示找不到任何的 PV 存在。

2. 使用`pvcreate`指令创建物理卷，输入`pvcreate /dev/sdb`回车，表示将该磁盘或分区设定为物理卷，设定成功返回“Physical volume "/dev/sdb" successfully created”。

3. 使用`pvremove`指令删除物理卷，输入`pvremove /dev/sdb`回车，表示删除该磁盘或分区的物理卷。

4. 使用`pvresize`调整物理卷大小，输入` pvresize --setphysicalvolumesize 500G /dev/vdd`，表示将该物理卷跳转到500G大小

5. 使用`pvdisplay`指令查询服务器上每个物理卷的详细信息。

   

### 卷组

利用物理卷来组建卷组

1. 使用`vgdisplay`指令查询服务器上每个卷组的详细信息。
2. 使用`vgcreate`指令创建卷组，输入`vgcreate vghome 物理卷1 物理卷2……物理卷n`回车，将物理卷1、物理卷2……物理卷n添加到卷组vghome里。
3. 使用`vgextend`指令扩展卷组，输入`vgextend vghome 物理卷1 物理卷2……物理卷n`回车，将物理卷1、物理卷2……物理卷n添加到卷组vghome里。
4. 使用`vgextend`指令移除物理卷，输入`vgreduce vghome 物理卷1 物理卷2……物理卷n`回车，将物理卷1、物理卷2……物理卷n从卷组vghome中移除。
5. 一个卷组最多可以包括255个物理卷，同时最多也只能划分出255个逻辑卷。

 

### 逻辑卷 

接着在卷组中创建逻辑卷

1. 使用`lvcreate`指令创建逻辑卷，输入`lvcreate -L100G -nlvhome vghome`回车，表示从卷组**vghome**划分100G空间给新创建的逻辑卷**lvhome** (L为字节数，l为PE数)
2. 使用`mke2fs`指令格式化新创建的逻辑卷，输入`mke2fs -t ext4 /dev/vghome/lvhome`回车，表示将逻辑卷**lvhome**格式化为ext4类型的文件系统。
3. 使用`lvexend`指令扩容逻辑卷，输入`lvextend -L +400G /dev/vghome/lvhome`回车，表示在原来的容量基础上再扩容50G (L为字节数，l为PE数)
4. 使用`resize2`fs指令执行增大或收缩的逻辑卷，输入`resize2fs /dev/vghome/lvhome`回车。

 

### 挂载

最后可以直接使用逻辑卷进行挂载

```bash
mount /dev/vghome/lvhome /home
```



>  参考：https://blog.csdn.net/sd4493091/article/details/66976078
>
>  [https://www.bluestep.cc/linux-lvremove%e5%91%bd%e4%bb%a4-%e5%88%a0%e9%99%a4%e6%8c%87%e5%ae%9alvm%e9%80%bb%e8%be%91%e5%8d%b7/](https://www.bluestep.cc/linux-lvremove命令-删除指定lvm逻辑卷/)